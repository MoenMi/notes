---
jupyter:
  kernelspec:
    display_name: Python
    language: python
    name: python3
---

(file-types:custom)=

The dataset analyzed in this report examines several categories of statistics for the 131 college football teams competing in NCAA D-I FBS during the 2022 season. The data comes from a [Kaggle dataset](https://www.kaggle.com/datasets/jeffgallini/college-football-team-stats-2019/data), which is a collection of data scraped from the [NCAA's website](https://www.ncaa.com/stats/football/fbs) for more convenient access.

## Reading in the Data

```{r fig.width=4.5, fig.height=4.5}
library(readxl)

# Set path to Excel file
csv_file <- "cfb22.xlsx"

# Read in data from Excel file
cfb22_data <- read_xlsx(csv_file)
```

## 1. Summarizing Offensive and Defensive Statistics

### Offensive Yards per Play

The `Off.Yards.Play` category in the data describes the average offensive yards per play for each FBS team.

```{r}
# Set category name
category = "Off.Yards.Play"

# Calculate mean
average_oyp <- mean(cfb22_data[[category]])
cat("Average:", round(average_oyp, 2))

# Calculate standard deviation
sd_oyp <- sd(cfb22_data[[category]])
cat("Standard Deviation:", round(sd_oyp, 2))
```

```{r, eval=FALSE, echo=FALSE}
# Calculate 5 stat summary
minimum <- min(cfb22_data[[category]])
q1 <- quantile(cfb22_data[[category]], 0.25)
median <- median(cfb22_data[[category]])
q3 <- quantile(cfb22_data[[category]], 0.75)
maximum <- max(cfb22_data[[category]])
cat("Minimum:", minimum, "\nQ1:", q1, "\nMedian:", median, "\nQ3:", q3, "\nMaximum:", maximum)
```

```{r fig.width=4, fig.height=3.5, fig.align='center'}
hist(cfb22_data$Off.Yards.Play,
     main = "Average Offensive Yards per Play",
     xlab = "Offensive Yards per Play"
)
```

### Offensive Touchdowns

The `Off.TDs` category in the data describes the total number of touchdowns scored by each team throughout all games in the 2022 season.

```{r}
# Set category name
category = "Off.TDs"

# Calculate mean
average_tds <- mean(cfb22_data[[category]])
cat("Average:", round(average_tds, 2))

# Calculate standard deviation
sd_tds <- sd(cfb22_data[[category]])
cat("Standard Deviation:", round(sd_tds, 2))
```

```{r, eval=FALSE, echo=FALSE}
# Calculate 5 stat summary
minimum <- min(cfb22_data[[category]])
q1 <- quantile(cfb22_data[[category]], 0.25)
median <- median(cfb22_data[[category]])
q3 <- quantile(cfb22_data[[category]], 0.75)
maximum <- max(cfb22_data[[category]])
cat("Minimum:", minimum, "\nQ1:", q1, "\nMedian:", median, "\nQ3:", q3, "\nMaximum:", maximum)
```

```{r fig.width=4, fig.height=3.5, fig.align='center'}
hist(cfb22_data$Off.TDs,
     main = "Total Number of Offensive Touchdowns",
     xlab = "Offensive Touchdowns"
)
```

### Yards Allowed per Play

The `Yards.Play.Allowed` category in the data describes the average number yards allowed per defensive play for each FBS team.

```{r}
# Set category name
category = "Yards.Play.Allowed"

# Calculate mean
average_yap <- mean(cfb22_data[[category]])
cat("Average:", round(average_yap, 2))

# Calculate standard deviation
sd_yap <- sd(cfb22_data[[category]])
cat("Standard Deviation:", round(sd_yap, 2))
```

```{r, eval=FALSE, echo=FALSE}
# Calculate 5 stat summary
minimum <- min(cfb22_data[[category]])
q1 <- quantile(cfb22_data[[category]], 0.25)
median <- median(cfb22_data[[category]])
q3 <- quantile(cfb22_data[[category]], 0.75)
maximum <- max(cfb22_data[[category]])
cat("Minimum:", minimum, "\nQ1:", q1, "\nMedian:", median, "\nQ3:", q3, "\nMaximum:", maximum)
```

```{r fig.width=4, fig.height=3.5, fig.align='center'}
hist(cfb22_data$Yards.Play.Allowed,
     main = "Average Yards Allowed per Play",
     xlab = "Yards Allowed per Play"
)
```

### Touchdowns Allowed

The `Total.TDs.Allowed` category in the data describes the total number of touchdowns allowed for each FBS team.

```{r}
# Set category name
category = "Total.TDs.Allowed"

# Calculate mean
average_tda <- mean(cfb22_data[[category]])
cat("Average:", round(average_tda, 2))

# Calculate standard deviation
sd_tda <- sd(cfb22_data[[category]])
cat("Standard Deviation:", round(sd_tda, 2))
```

```{r, eval=FALSE, echo=FALSE}
# Calculate 5 stat summary
minimum <- min(cfb22_data[[category]])
q1 <- quantile(cfb22_data[[category]], 0.25)
median <- median(cfb22_data[[category]])
q3 <- quantile(cfb22_data[[category]], 0.75)
maximum <- max(cfb22_data[[category]])
cat("Minimum:", minimum, "\nQ1:", q1, "\nMedian:", median, "\nQ3:", q3, "\nMaximum:", maximum)
```

```{r fig.width=4, fig.height=3.5, fig.align='center'}
hist(cfb22_data$Total.TDs.Allowed,
     main = "Total Touchdowns Allowed",
     xlab = "Number of Touchdowns Allowed"
)
```

## 2. ACC vs. SEC vs. B10 Summary Statistics

Now, we'll compare these same statistics among three different conferences: the Southeastern Conference (SEC), the Big Ten Conference (B10), and the Atlantic Coast Conference (ACC).

```{r}
# The 'Conference' category will be used in this section to filter data by conference
group_category <- "Conference"
```

### Offensive Yards per Play

The `Off.Yards.Play` category in the data describes the average offensive yards per play for each FBS team.

```{r}
stat_category <- "Off.Yards.Play"

# Find conference data
sec_oyp <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "SEC"]
b10_oyp <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "Big Ten"]
acc_oyp <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "ACC"]

# Find summary statistics and create data frame for display
oyp_summary <- data.frame(
  Conference = c("SEC", "B10", "ACC", "FBS"),
  Mean = c(mean(sec_oyp),  mean(b10_oyp), mean(acc_oyp), average_oyp),
  SD = c(sd(sec_oyp), sd(b10_oyp), sd(acc_oyp), sd_oyp)
)
print(oyp_summary)
```

```{r fig.height=4, fig.align='center'}
oyp_data <- list(SEC = sec_oyp, B10 = b10_oyp, ACC = acc_oyp, FBS = cfb22_data[[stat_category]])
boxplot(oyp_data,
        main = "Offensive Yards per Play by Conference",
        ylab = "Average Yards per Play"
)
```

### Offensive Touchdowns

The `Off.TDs` category in the data describes the total number of touchdowns scored by each team throughout all games in the 2022 season.

```{r}
stat_category <- "Off.TDs"

# Find conference data
sec_tds <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "SEC"]
b10_tds <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "Big Ten"]
acc_tds <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "ACC"]

# Find summary statistics and create data frame for display
tds_summary <- data.frame(
  Conference = c("SEC", "B10", "ACC", "FBS"),
  Mean = c(mean(sec_tds), mean(b10_tds), mean(acc_tds), average_tds),
  SD = c(sd(sec_tds), sd(b10_tds), sd(acc_tds), sd_tds)
)
print(tds_summary)
```

```{r fig.height=4, fig.align='center'}
tds_data <- list(SEC = sec_tds, B10 = b10_tds, ACC = acc_tds, FBS = cfb22_data[[stat_category]])
boxplot(tds_data,
        main = "Total Offensive Touchdowns by Conference",
        ylab = "Offensive Touchdowns"
)
```

Note that the outlier in the Big Ten data above is Ohio State, who scored a total of 72 touchdowns in the 2022 season.

### Yards Allowed per Play

The `Yards.Play.Allowed` category in the data describes the average number yards allowed per defensive play for each FBS team.

```{r}
stat_category <- "Yards.Play.Allowed"

# Find conference data
sec_yap <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "SEC"]
b10_yap <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "Big Ten"]
acc_yap <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "ACC"]

# Find summary statistics and create data frame for display
yap_summary <- data.frame(
  Conference = c("SEC", "B10", "ACC", "FBS"),
  Mean = c(mean(sec_yap), mean(b10_yap), mean(acc_yap), average_yap),
  SD = c(sd(sec_yap), sd(b10_yap), sd(acc_yap), sd_yap)
)
print(yap_summary)
```

```{r fig.height=4, fig.align='center'}
yap_data <- list(SEC = sec_yap, B10 = b10_yap, ACC = acc_yap, FBS = cfb22_data[[stat_category]])
boxplot(yap_data,
        main = "Average Yards Allowed per Play by Conference",
        ylab = "Yards Allowed per Play"
)
```

### Touchdowns Allowed

The `Total.TDs.Allowed` category in the data describes the total number of touchdowns allowed for each FBS team.

```{r}
stat_category <- "Total.TDs.Allowed"

# Find conference data
sec_tda <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "SEC"]
b10_tda <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "Big Ten"]
acc_tda <- cfb22_data[[stat_category]][cfb22_data[[group_category]] == "ACC"]

# Find summary statistics and create data frame for display
tda_summary <- data.frame(
  Conference = c("SEC", "B10", "ACC", "FBS"),
  Mean = c(mean(sec_tda), mean(b10_tda), mean(acc_tda), average_tda),
  SD = c(sd(sec_tda), sd(b10_tda), sd(acc_tda), sd_tda)
)
print(tda_summary)
```

```{r fig.height=4, fig.align='center'}
tda_data <- list(SEC = sec_tda, B10 = b10_tda, ACC = acc_tda, FBS = cfb22_data[[stat_category]])
boxplot(tda_data,
        main = "Total Touchdowns Allowed by Conference",
        ylab = "Touchdowns Allowed"
)
```

### Conclusions

Based on the offensive yards per play and total number of offensive touchdowns, we can see that the SEC tends to outperform the Big Ten, the ACC, and the rest of the FBS when it comes to offense. Notably, the SEC averaged 6.13 yards per play, a significant improvement over the Big Ten's 5.47 yards per play and the ACC's 5.59 yards per play. Note, however, that the SEC is comparatively worse when it comes to defensive metrics. In terms of yards allowed per play, the SEC's 5.48 is only just below the FBS average of 5.55 and significantly higher than the ACC's 5.30 and the Big Ten's 5.09. This effect is unsurprising, since most games played in a conference are against other members of the conference. The data confirms the notion that teams in the Big Ten place more emphasis on defense, while teams in the SEC place more emphasis on offense.

## 3. Hypothesis Tests for SEC vs. ACC

In this section, we will use R's `t.test()` function to perform hypothesis tests comparing the equivalence of means for each category between the SEC and ACC. For each of the tests below, the null hypothesis is equivalent means for the SEC and ACC in the given metric.

### Offensive Yards per Play

```{r}
test_result <- t.test(sec_oyp, acc_oyp)
p_value <- test_result$p.value
cat("p-value:", p_value) 
```

This p-value is not quite low enough to reject the null hypothesis with the conventional level of significance of 0.05. However, it does suggest that there is a near significant relationship between ACC/SEC membership and offensive yards per play since the p-value is close to this level of significance.

### Offensive Touchdowns

```{r}
test_result <- t.test(sec_tds, acc_tds)
p_value <- test_result$p.value
cat("p-value:", p_value) 
```

This p-value is not low enough to reject the null hypothesis with the conventional level of significance of 0.05. While there is an observed difference in the total offensive touchdowns between the ACC and SEC, this difference does not seem to be statistically significant.

### Yards Allowed per Play

```{r}
test_result <- t.test(sec_yap, acc_yap)
p_value <- test_result$p.value
cat("p-value:", p_value) 
```

This p-value suggests that there is much of a relationship between the average yards allowed per play and ACC/SEC membership.

### Touchdowns Allowed

```{r}
test_result <- t.test(sec_tda, acc_tda)
p_value <- test_result$p.value
cat("p-value:", p_value) 
```

This p-value suggests that there is no relationship between total touchdowns allowed per play and ACC/SEC membership.

## 4. Offensive vs. Defensive Rankings

```{r fig.height=4, fig.align='center'}
plot(cfb22_data$Off.Rank, cfb22_data$Def.Rank,
     main = "Offensive vs. Defensive Ranking",
     xlab = "Offensive Ranking",
     ylab = "Defensive Ranking"
)
```

The scatter plot suggests that there is no relationship between offensive and defensive ranking.

## 5. Offensive Yards per Play vs. Offensive Touchdowns

```{r fig.height=4, fig.align='center'}
plot(cfb22_data$Off.Yards.Play, cfb22_data$Off.TDs,
     main = "Offensive Yards per Play vs. Touchdowns",
     xlab = "Offensive Yards per Play",
     ylab = "Offensive Touchdowns"
)
```

This scatter plot suggests that there is a positive, linear relationship between offensive yards per play and offensive touchdowns. This is a logical relationship, since offenses that are more effective at moving the ball down the field are more likel to score more touchdowns.


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
